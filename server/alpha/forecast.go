package alpha

import (
	"context"
	"financia/models"
	"go.uber.org/zap"
)

var a = []float64{18.980879, 19.193495, 19.404089, 21.597904, 22.695515, 27.439188, 27.591682, 25.216797, 23.339289, 22.99325, 23.885456, 25.196302, 25.452028, 26.314308, 25.902159, 25.729174, 25.635477, 26.722633, 25.977009, 25.92402, 23.836618, 22.350868, 21.191372, 21.636883, 21.225086, 20.717386, 21.495665, 20.989353, 20.683146, 20.115265, 19.151966, 18.907705, 19.60919, 18.738443, 17.90911, 18.083008, 18.306778, 17.739008, 17.268635, 17.529518, 19.43521, 20.625975, 19.584976, 19.603226, 20.077908, 19.465881, 18.449623, 17.727144, 17.540354, 18.745522, 19.794018, 20.066704, 19.971308, 21.837173, 23.487617, 22.509647, 21.415823, 21.529856, 22.49115, 22.25297, 22.518414, 23.845882, 23.313663, 22.249495, 21.2327, 20.4077, 20.601871, 21.725605, 22.335518, 22.312737, 21.916351, 22.270905, 22.053492, 21.56093, 21.273415, 21.009151, 21.142042, 21.37958, 21.63427, 21.942602, 21.701933, 21.461805, 22.31163, 22.785849, 23.28951, 24.819704, 25.439993, 25.596222, 24.40792, 24.508125, 24.851738, 24.255243, 24.58862, 24.91842, 26.111366, 27.624882, 28.583183, 28.247179, 29.115335, 29.016304, 28.831451, 29.055746, 29.053612, 29.892752, 28.328144, 27.019812, 26.838165, 27.64498, 27.107416, 26.869242, 26.6688, 27.056957, 28.336538, 29.183386, 28.530727, 28.902262, 29.584198, 28.704117, 28.530815, 29.901012, 30.369469, 30.546814, 30.74864, 30.035385, 29.026115, 28.161018, 29.542603, 30.384443, 28.048807, 26.032858, 24.846397, 25.46823, 25.595078, 24.677092, 24.42171, 23.778906, 23.159739, 23.136415, 23.223574, 23.16939, 24.230198, 24.685984, 24.05475, 23.872326, 23.015976, 22.448221, 22.068117, 21.86632, 22.080788, 21.540064, 21.601496, 21.752165, 22.298052, 22.792162, 23.054035, 23.386776, 24.084045, 23.722515, 23.08719, 22.433685, 22.143736, 21.915705, 22.531322, 22.939732, 23.37054, 23.010315, 22.809265, 22.73743, 22.530348, 22.313456, 21.252848, 21.75636, 21.821697, 22.43912, 22.601841, 21.552227, 21.75792, 20.630772, 20.321821, 20.2023, 20.055525, 19.779116, 19.55986, 19.158152, 18.884802, 19.141497, 18.92824, 19.004633, 19.399836, 20.035057, 19.999157, 19.860008, 20.319176, 20.036049, 20.22279, 20.777168, 20.727169, 20.938889, 20.890636, 20.629461, 20.287525, 20.368168, 20.628132, 20.387806, 20.780296, 20.30854, 19.917362, 19.887365, 19.779148, 20.099318, 19.9992, 19.546747, 19.163553, 19.170326, 19.757502, 19.853733, 19.678894, 19.88648, 19.888815, 20.438713, 20.610216, 20.974728, 21.347862, 21.433584, 21.530663, 21.961958, 22.668373, 22.820332, 21.883444, 21.884275, 21.646736, 22.168703, 22.41719, 22.233067, 23.072052, 23.111599, 23.594639, 24.399815, 25.304352, 25.6322, 30.536518, 30.92822, 29.52467, 29.962444, 30.38047, 30.647036, 32.70029, 32.958878, 32.524334, 33.41432, 34.292427, 34.738476, 34.37869, 34.169277, 35.560974, 36.009197, 35.646805, 34.656067, 34.77868, 34.388985, 34.31934, 33.939213, 33.480522, 32.194473, 32.266773, 32.587852, 31.794352, 31.978106, 32.183163, 31.985443, 32.301388, 32.71366, 31.92779, 30.947538, 31.453085, 31.588985, 32.30825, 32.379814, 33.25787, 33.428814, 33.633553, 33.306236, 33.58319, 34.213863, 34.595932, 38.26493, 40.636223, 41.646633, 40.56693, 40.62522, 40.220226, 41.426903, 42.417076, 43.070675, 43.544167, 43.276196, 42.944164, 41.83646, 41.72401, 41.2643, 40.939587, 42.172894, 41.965477, 40.886272, 34.231956, 33.563995, 33.70659, 36.291534, 36.539696, 36.05324, 35.291576, 35.173603, 35.212784, 35.490555, 35.804367, 36.778896, 37.034657, 37.419903, 37.179295, 37.491127, 36.917233, 37.599052, 38.38302, 37.69507, 37.24808, 37.230408, 37.29192, 37.65062, 38.00933, 38.673412, 38.316147, 37.59862, 39.945545, 40.45986, 39.83191, 40.544136, 40.334454, 40.20762, 39.034477, 39.186558, 38.538513, 38.477917, 39.33745, 39.439056, 38.75957, 39.175472, 38.030327, 37.534805, 36.1785, 36.798077, 36.620968, 35.373352, 35.14408, 35.21212, 36.44021, 35.897182, 36.115288, 34.989124, 34.79192, 35.6248, 36.38957, 36.641598, 36.884247, 36.361275, 36.764797, 36.466522, 35.249256, 33.68394, 33.727173, 34.086906, 34.903667, 34.928368, 36.887302, 36.18293, 35.866768, 36.050407, 36.06251, 35.980732, 37.46946, 36.031258, 33.596725, 33.88, 31.881117, 32.754208, 31.62621, 32.562862, 33.81931, 33.516434, 35.1406, 36.721035, 36.9291, 35.380463, 35.521416, 35.906364, 36.07831, 35.304398, 36.552326, 37.824112, 39.809692, 39.53081, 40.595104, 41.023014, 42.645695, 42.959297, 44.86956, 44.461018, 48.67926, 50.446754, 52.189003, 50.04812, 49.46264, 50.971966, 49.21279, 48.535236, 47.59294, 45.667034, 46.004128, 48.627323, 49.2485, 49.327724, 52.9571, 54.51162, 57.58966, 59.54973, 59.481525, 61.313423, 64.97301, 65.28867, 61.892673, 59.65163, 66.93532, 67.369125, 61.460697, 60.417564, 65.17162, 66.10578, 67.637886, 68.2416, 66.56668, 69.87641, 69.606964, 68.473946, 72.163, 72.15776, 73.29665, 75.99602, 80.128784, 81.46151, 83.791336, 87.8077, 84.7758, 84.20777, 84.293526, 85.55907, 85.244965, 86.00488, 87.173546, 84.90234, 91.992035, 92.594444, 89.35356, 92.23127, 91.20488, 87.432304, 90.64213, 85.77635, 86.69424, 82.678185, 83.11356, 83.0678, 84.123985, 80.93958, 79.73909, 78.20707, 81.46398, 83.6957, 84.34578, 83.88666, 89.88753, 94.459, 94.08233, 95.9483, 93.56002, 89.33121, 88.19656, 88.22765, 89.02292, 89.075, 85.82324, 89.38272, 91.29381, 94.47541, 96.60395, 86.62761, 85.47514, 86.861916, 88.522446, 88.30111, 88.93407, 88.48468, 91.089264, 90.17967, 86.356865, 84.26552, 81.4839, 84.21724, 84.489555, 84.1456, 84.937004, 83.23855, 82.23509, 80.111946, 80.03417, 78.779854, 79.4748, 77.378784, 75.02381, 74.68708, 74.92978, 73.835464, 73.93429, 74.002716, 71.83723, 71.46531, 72.917725, 74.74815, 73.9341, 77.50576, 83.93735, 83.79981, 83.561676, 81.235176, 84.07705, 84.35187, 88.22449, 90.7687, 88.38652, 86.5308, 86.66461, 89.21478, 89.06742, 93.903275, 91.3345, 90.94101, 97.00875, 107.13891, 112.89285, 112.66387, 107.851456, 101.542915, 108.426765, 134.6737, 146.5872, 141.4441, 132.25601, 131.82982, 136.15736, 142.33669, 142.15857, 141.84412, 136.51761, 142.05386, 138.69484, 137.55147, 138.46776, 144.3328, 145.51152, 146.29718, 153.4735, 152.06232, 150.50987, 146.94705, 144.12752, 142.49863, 144.65962, 148.65714, 149.80988, 147.26747, 143.07181, 141.24358, 148.48222, 148.25366, 159.26619, 170.7015, 174.68918, 168.86787, 177.87843, 178.47174, 179.07481, 179.69843, 171.78278, 171.66333, 169.72136, 170.43695, 164.73737, 170.79823, 174.87613, 172.42848, 172.58035, 183.30185, 177.82411, 171.08043, 171.7985, 170.95776, 175.10901, 180.80856, 188.21979, 194.66464, 194.29874, 191.9479, 191.44078, 197.26181, 200.27516, 198.28693, 202.81999, 202.81999, 198.1672, 199.07607, 193.01163, 186.29211, 183.06421, 177.33858, 172.1917, 180.62541, 178.07825, 172.54166, 162.32565, 157.78603, 147.27632, 152.20988, 153.75641, 159.36, 158.40947, 156.88959, 162.31693, 150.92981, 145.53537, 143.36298, 140.95653, 138.34923, 131.32909, 128.62152, 133.18605, 133.2235, 134.3649, 134.15134, 142.97008, 141.12654, 145.34909, 139.85765, 140.2877, 137.45642, 134.81497, 134.8657, 133.78233, 132.94534, 133.54036, 133.01321, 128.19753, 127.223526, 132.43869, 137.06204, 137.44807, 139.18529, 140.488, 138.11623, 134.95256, 133.86491, 132.1721, 131.85544, 133.49673, 133.70915, 123.911064, 122.66632, 125.77296, 119.41944, 117.55211, 117.969376, 121.5472, 123.02174, 129.01685, 128.48863, 128.58449, 131.22328, 128.55301, 122.12866, 123.95967, 137.77644, 136.99934, 132.32823, 132.14586, 128.131, 126.62628, 126.86297, 123.74332, 122.138885, 121.07416, 122.54061, 121.58904, 123.6546, 125.786835, 121.39806, 118.91602, 120.73515, 125.48305, 126.87518, 125.387276, 128.5635, 128.14276, 123.47922, 119.87133, 114.187096, 112.23896, 107.49786, 110.5278, 109.960365, 111.47939, 107.87221, 110.03025, 108.17085, 104.39119, 102.71572, 103.12019, 104.17235, 97.71965, 90.54346, 83.46656, 91.807274, 93.54496, 89.801476, 89.68177, 88.08247, 89.55351, 87.47631, 87.26541, 90.23245, 92.04039, 89.726944, 86.09457, 84.712204, 81.71758, 79.42619, 80.49062, 75.04886, 78.36173, 79.93388, 98.07941, 98.177155, 95.41665, 94.49222, 93.541595, 99.372955, 105.42485, 102.56099, 101.370895, 107.3027, 105.099045, 102.64298, 104.42425, 102.31589, 101.56465, 98.57053, 98.65756, 100.50047, 94.41614, 94.75421, 96.85934, 96.67607, 94.17744, 93.98607, 90.461494, 89.24979, 89.87516, 88.64138, 84.6, 86.6758, 87.28741, 94.05411, 95.29616, 96.15248, 93.59655, 96.50273, 94.51081, 93.69751, 95.094284, 97.909004, 99.36112, 97.16961, 100.31483, 99.82426, 95.858505, 92.53563, 90.987236, 89.66882, 91.475296, 91.33885, 91.6797, 89.008675, 84.36706, 83.4394, 83.152824, 86.39745, 91.29156, 93.12207, 91.76531, 93.047295, 90.29688, 84.98468, 83.43802, 80.805595, 79.60328, 80.68751, 70.55222, 71.26206, 68.471176, 64.963776, 59.696537, 55.433544, 55.702515, 63.40644, 62.24218, 62.372158, 63.263924, 61.34339, 60.495712, 58.472603, 58.00401, 56.732327, 55.08939, 58.013103, 57.52722, 56.63212, 57.40168, 55.685745, 54.328526, 57.073345, 58.302746, 56.618336, 51.613243, 49.747803, 51.397675, 55.656673, 56.38666, 58.979942, 61.407528, 57.944717, 59.92875, 60.73902, 64.13863, 68.299255, 63.86463, 59.716106, 60.061096, 56.888603, 52.11435, 51.920944, 57.91137, 59.6241, 57.904457, 55.25143, 55.31886, 54.440434, 57.72953, 62.1291, 62.33283, 60.878098, 58.49621, 60.4076, 60.811752, 60.366066, 56.171345, 54.76538, 53.50801, 50.178146, 51.584946, 51.21504, 51.701225, 49.238956, 47.05331, 43.100468, 39.874325, 39.93878, 42.391357, 37.645733, 34.80955, 28.930117, 29.490883, 43.34098, 41.00022, 42.20649, 42.830612, 46.816414, 50.387657, 46.341652, 43.03334, 42.869183, 44.694473, 44.04412, 40.816566, 43.622684, 48.433243, 47.235813, 44.474033, 42.73085, 42.55267, 42.377773, 41.874126, 42.817112, 41.54972, 38.918003, 38.937233, 37.878124, 35.617, 35.428467, 34.791317, 35.161713, 37.107494, 37.506462, 44.06448, 43.71301, 43.64489, 43.573772, 41.23695, 38.789288, 35.862038, 35.837334, 35.510105, 33.7531, 36.653557, 38.129673, 40.674305, 39.051945, 41.01656, 41.69937, 39.90171, 37.536194, 38.192398, 40.747086, 46.900345, 51.706898, 49.725018, 50.94622, 50.811108, 55.265633, 58.013466, 64.64565, 60.43908, 61.286148, 55.81707, 59.74618, 60.784206, 58.019253, 60.419685, 63.93887, 61.308636, 63.69383, 65.80173, 65.93758, 63.4414, 62.237278, 61.23001, 63.42851, 65.15824, 62.89994, 62.401726, 60.885624, 55.98132, 56.073643, 55.86037, 54.754692, 53.947075, 55.880173, 55.140995, 53.63742, 55.02112, 54.466213, 55.191914, 55.28814, 53.962116, 51.861725, 49.19515, 47.40212, 48.34917, 49.275562, 52.09233, 49.779694, 48.12701, 47.723354, 46.688248, 49.925392, 48.369698, 49.59988, 49.367718, 48.531727, 46.855385, 46.074047, 47.580265, 49.643658, 51.874577, 58.944374, 60.545845, 69.92185, 68.735405, 71.52018, 71.29262, 71.122826, 68.16034, 67.039986, 67.617645, 69.974304, 70.56478, 68.38427, 68.84083, 68.95655, 65.22318, 64.97741, 66.008896, 63.166367, 63.089798, 60.59555, 60.929485, 62.12795, 61.298542, 60.7691, 61.947025, 62.029552, 65.75449, 66.3607, 65.62732, 63.261227, 59.18698, 56.638588, 56.408707, 54.718452, 54.592934, 55.922134, 58.753872, 55.418964, 56.594627, 57.61867, 47.552616, 50.072315, 52.563435, 53.52455, 51.553394, 54.09896, 56.53858, 54.0328, 55.25332, 61.80007, 63.09246, 61.215294, 59.597836, 63.85112, 66.53138, 65.89124, 71.474174, 68.143776, 69.460205, 70.44766, 67.64186, 65.917404, 67.18479, 65.43518, 75.63762, 79.443596, 82.70106, 82.91267, 85.579796, 88.30468, 87.075485, 85.02012, 90.55856, 90.68537, 86.44287, 90.27232, 89.4597, 88.96863, 87.88821, 86.8972, 85.47953, 85.490425, 85.87263, 83.884125, 85.74775, 82.001175, 81.90722, 80.987114, 86.12064, 91.03836, 93.5064, 94.888145, 96.66585, 94.489716, 92.864296, 92.94266, 96.39013, 94.02625, 92.471664, 91.07143, 92.26078, 94.736374, 94.74462, 95.29385, 102.27241, 104.1757, 97.14655, 97.78334, 102.992256, 99.9205, 96.44058, 92.53489, 95.14949, 92.35152, 94.513504, 91.192345, 95.14367, 94.5617, 93.26077, 95.667534, 93.27893, 85.536514, 84.33953, 87.092415, 83.881485, 85.57703, 87.58079, 91.64201, 93.33991, 95.40276, 93.83333, 93.1627, 92.13122, 87.23615, 85.41588, 89.12067, 91.97665, 91.42338, 92.58843, 92.9684, 80.26627, 81.04851, 78.29948, 78.58377, 74.951904, 71.838326, 72.80817, 72.64544, 76.203896, 75.14977, 73.621056, 73.30071, 71.97861, 71.60302, 70.78016, 71.11963, 68.11595, 68.72271, 67.887886, 68.76048, 70.42297, 69.146065, 69.450096, 68.73855, 67.23328, 64.65594, 65.79487, 65.824326, 67.10903, 68.17841, 65.21677, 63.603832, 64.3167, 63.481533, 62.1076, 60.917923, 60.848648, 63.82393, 63.541958, 65.438255, 65.50266, 65.329254, 63.494904, 60.84399, 63.213486, 62.09567, 61.487297, 60.90736, 71.06594, 70.293785, 65.05997, 67.951454, 70.86298, 68.0464, 71.02415, 72.614365, 74.87641, 76.51907, 76.20229, 78.134, 78.011856, 81.81062, 80.364, 74.899666, 73.96556, 72.82273, 70.05269, 69.98112, 72.05228, 70.01757, 67.89918, 69.0033, 71.649864, 70.87148, 68.55692, 69.54868, 70.06618, 71.21029, 75.054665, 80.37379, 79.48705, 78.0131, 76.24618, 77.121704, 75.380516, 76.50827, 78.07682, 83.18646, 83.95371, 84.48502, 89.043365, 89.38725, 89.757416, 85.34743, 88.44995, 88.62419, 85.75759, 82.98481, 84.03113, 85.78242, 81.31018, 80.77829, 79.15334, 78.60549, 80.51034, 76.506065, 77.2516, 78.23561, 78.36794, 79.194984, 79.03418, 80.916336, 94.57809, 97.605644, 99.46663, 102.05988, 99.68611, 100.86541, 96.49401, 95.79398, 97.415215, 97.758995, 98.32127, 98.67028, 99.113716, 99.39692, 97.8744, 95.17789, 92.08642, 95.77858, 94.72611, 94.33867, 94.22293, 94.49474, 97.99761, 98.378815, 97.62326, 97.1789, 97.141136, 103.91305, 106.9744, 108.04474, 109.37707, 107.38943, 105.27067, 105.002266, 104.16469, 104.59322, 103.44574, 102.57777, 103.10203, 108.28706, 107.20473, 107.351425, 108.939064, 105.60731, 101.47953, 102.24202, 101.283775, 105.3415, 106.93105, 106.97225, 107.85551, 107.9315, 107.30125, 108.446304, 109.04968, 114.30922, 110.79708, 113.22872, 117.40387, 116.02208, 116.44674, 117.54218, 117.51363, 137.44762, 139.65845, 142.0554, 142.20949, 140.1475, 139.7989, 141.53867, 139.65663, 138.05452, 140.91708, 144.54408, 145.27554, 146.19037, 147.29253, 146.97374, 148.37656, 146.90594, 146.53732, 143.38089, 145.83559, 144.93362, 145.94283, 145.98083, 145.04576, 147.58064, 148.40338, 147.07083, 146.40561, 148.79045, 149.77908, 151.34297, 150.04175, 145.37572, 141.77014, 144.20117, 143.73859, 141.76465, 143.30283, 145.47398, 144.89159, 142.22702, 135.58089, 129.35419, 128.87886, 128.75601, 125.18012, 122.9617, 126.730934, 127.19, 127.18121, 126.318474, 130.42583, 128.66768, 130.40044, 133.1266, 135.1642, 131.14546, 130.67712, 131.08478, 128.97847, 124.8476, 128.29778, 125.51219, 125.36944, 126.79276, 123.42559, 121.03307, 119.69412, 117.07762, 113.42995, 114.307526, 117.75475, 123.53234, 121.5866, 123.22695, 127.28784, 125.959274, 138.52449, 126.23201, 123.23169, 121.53707, 117.99549, 116.766335, 116.05777, 118.51478, 117.217186, 117.52447, 117.50468, 116.495705, 115.28329, 118.876785, 119.22068, 119.22737, 116.2002, 114.510735, 112.9109, 113.06861, 113.68099, 112.26136, 119.97692, 126.81484, 126.25766, 123.62848, 127.299, 126.21003, 124.74593, 123.53829, 134.39095, 137.58412, 137.50609, 135.23073, 136.51779, 136.84271, 136.26234, 139.36232, 137.46867, 139.29068, 141.95079, 145.66467, 146.58888, 145.5045, 150.1969, 154.11356, 158.8394, 153.53687, 150.29245, 152.6701, 149.9118, 148.05072, 147.17412, 144.75484, 144.62209, 143.36365, 146.89209, 148.06815, 148.97295, 151.01343, 149.1045, 148.7027, 146.04314, 145.24391, 144.56467, 143.45596, 142.00291, 140.0236, 135.66177, 135.07838, 133.70895, 133.76703, 136.37343, 135.60873, 134.55449, 136.46062, 137.74574, 139.23332, 142.28821, 137.12778, 136.7161, 133.24345, 132.64272, 132.58295, 134.82101, 132.65033, 132.11325, 130.85338, 129.81091, 128.08665, 125.720116, 128.67274, 128.50041, 126.21273, 124.85174, 130.66895, 133.13268, 135.33994, 136.74248, 139.11945, 142.1423, 141.31853, 143.56053, 146.9814, 148.71553, 145.38335, 145.38664, 147.29356, 142.78975, 115.160065, 108.30234, 101.46785, 100.12103, 101.42208, 99.65898, 96.45934, 92.76583, 93.48982, 91.28955, 92.20016, 93.03816, 96.12922, 92.87776, 94.855995, 96.701164, 96.491104, 98.979294, 98.66029, 100.57164, 111.99696, 112.05299, 128.69699, 135.5501, 136.7532, 139.72267, 150.4769, 148.76855, 151.45628, 151.42404, 144.08641, 141.61021, 141.10168, 142.07318, 138.73267, 131.1923, 129.31541, 125.18263, 127.375015, 124.92354, 130.64853, 125.52396, 121.84643, 122.808914, 125.153694, 125.1856, 120.986725, 119.83615, 120.21662, 121.159706, 122.43621, 118.7677, 125.18986, 119.16167, 117.032234, 113.587906, 113.81729, 111.46718, 113.81447, 116.33617, 116.39304, 115.72289, 107.38521, 102.59499, 100.58648, 100.233086, 99.95925, 96.81374, 97.92664, 98.663315, 97.49183, 97.86907, 99.22427, 110.55945, 104.79663, 101.05445, 103.65346, 100.92519, 99.45378, 101.66298, 101.35984, 100.610085, 98.71844, 99.36619, 99.17614, 96.5812, 95.34988, 96.441734}

func InsertStockForecast(company string) {
	ctx := context.Background()
	// 1. 获取所有股票数据
	data := make([]*models.StockForecast, 0, len(a))
	stockRepo := models.NewStockRepo(ctx)
	offset30, err := stockRepo.DateOffset30(company)
	if err != nil {
		zap.S().Errorf("DateOffset30 Error: %v", err)
		return
	}
	zap.S().Debug(len(offset30))
	zap.S().Debug(len(a))
	for i := 0; i < len(a)-1; i++ {
		data = append(data, &models.StockForecast{
			Company: company,
			Date:    offset30[i].Date,
			Type:    1,
			Value:   a[i],
		})
	}
	data = append(data, &models.StockForecast{
		Company: company,
		Date:    getNextWeekday(),
		Type:    1,
		Value:   a[len(a)-1],
	})

	// 2. 插入数据
	forecastRepo := models.NewStockForecastRepo(ctx)
	err = forecastRepo.Insert(data)

}
